@if (isSidebarOpen) {
  <div class="sidebar-backdrop" (click)="toggleSidebar()"></div>

  <div class="sidebar-container">
    <app-sidebar (linkClicked)="toggleSidebar()"></app-sidebar>
  </div>
}

<main class="main-app"
      [class.blurred]="!(user$ | async)"
      [class.sidebar-open]="isSidebarOpen">

  <nav class="navbar" [class.mobile-navbar-scrolled]="isMobileNavbarActive">
    <span
      class="menu-icon"
      (click)="toggleSidebar()"
      (keydown.enter)="toggleSidebar()"
      (keydown.space)="toggleSidebar(); $event.preventDefault()"
      aria-label="Apri il menu di navigazione"
      role="button"
      tabindex="0">
      â˜°
    </span>
    <div class="navbar-left">
      <a routerLink="/analisi">
        <img src="assets/logo.png" alt="Recruit AI Logo" class="navbar-logo">
      </a>
    </div>
  </nav>

  <router-outlet></router-outlet>

</main>

@if (user$ | async; as user) {
  <div class="user-info-container">
    <span>Ciao, {{ user.displayName }}</span>
    <button (click)="logout()" class="btn-glass-logout">Logout</button>
  </div>
} @else {
  <div class="login-modal-backdrop">
    <div class="login-modal-content">
      <h2>Accesso Richiesto</h2>
      <p>Per utilizzare lo strumento di analisi, accedi con il tuo account Google.</p>
      <button (click)="login()" class="btn-glass-login">
        Login con Google
      </button>
    </div>
  </div>
}
