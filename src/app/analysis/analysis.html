<div class="blurred-background"></div>
<div class="container">
  <div class="analysis-content">
    <app-header></app-header>
    <h2>Esegui l'analisi</h2>

    <div class="inputs-wrapper">
      <div class="input-group">
        <label for="jd-text">Job Description</label>
        <textarea [(ngModel)]="jd" id="jd-text" placeholder="Incolla qui la descrizione del lavoro..."></textarea>
      </div>

      <div class="input-group">
        <label for="cv-text">Curriculum Vitae</label>
        <textarea [(ngModel)]="cv" id="cv-text" placeholder="Incolla qui il testo del CV del candidato..."></textarea>
      </div>
    </div>

    <button (click)="analyze()" [disabled]="isLoading">
      <span *ngIf="isLoading; else analyzeLabel">Analisi in corso...</span>
      <ng-template #analyzeLabel>
        <span>Analizza</span>
      </ng-template>
    </button>

    <div *ngIf="error" class="error-message">
      <strong>Errore:</strong> {{ error }}
    </div>

    <div *ngIf="result" class="result-section">
      <h3>Punteggio: {{ result.matchScore }} / 100</h3>

      <h4>Riepilogo</h4>
      <p>{{ result.summary }}</p>

      <h4>Punti di Forza</h4>
      <ul>
        <li *ngFor="let strength of result.strengths; trackBy: trackByIndex">{{ strength }}</li>
      </ul>

      <h4>Aree da Approfondire</h4>
      <ul>
        <li *ngFor="let gap of result.gaps; trackBy: trackByIndex">{{ gap }}</li>
      </ul>
    </div>
  </div>
</div>
